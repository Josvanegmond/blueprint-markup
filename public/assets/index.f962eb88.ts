import{d as w,r as F,a as O,v as L,b as m,w as V,c as b,o as u,e as g,f as t,g as k,h as c,i as _,j as $,k as A,F as I,l as U,p as R,m as q,n as S,q as D,s as z,t as C,u as j,x as T,y as B,z as E,A as J,B as M}from"./vendor.a858e535.js";const x=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const p of s.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}};x();var N=(e,o)=>{const i=e.__vccOpts||e;for(const[a,n]of o)i[a]=n;return i};const H=w({components:{PrinterIcon:F,FolderOpenIcon:O,FileSelector:L.exports.FileSelector,Dropzone:L.exports.Dropzone,DialogButton:L.exports.DialogButton},methods:{printTo(e,o,i,a){const n=this.router.resolve({path:"/print",query:{filename:i+"-"+e,page:o,imagesJSON:a,printSetting:e}});window.open(n.href,e)},print(e,o,i,a,n){const s=JSON.stringify(o);i&&this.printTo("A4","A4",e,s),a&&this.printTo("Letter","Letter",e,s),n&&this.printTo("Printshop","A4",e,s)},getPageSize(){return this.pageSize=="Letter"?"page-letter":"page-a4"},getPageRegmarks(){return this.pageSize=="Letter"?"letter-regmarks.png":"a4-regmarks.png"},changePageNumber(e,o,i){let a=e[o];e.splice(o,1),e.splice(i,0,a),e.forEach((n,s)=>{n.pageNumber=s})}},setup(){const e=m([]),o=m([]),i=m([]),a=m("A4"),n=m("Blueprints"),s=m(!0),p=m(!0),P=m(!0);return V(e,(f,y)=>{o.value=[],f.forEach(v=>{o.value.push(URL.createObjectURL(v))})},{flush:"post"}),V(o,f=>{i.value=f.map((y,v)=>({url:y,align:"start",regmarks:!0,printA4:!0,printLetter:!0,printPrintshop:!0,pageNumber:v}))}),{previews:e,images:i,pageSize:a,fileName:n,printA4:s,printLetter:p,printPrintshop:P}}}),h=e=>(R("data-v-57feb318"),e=e(),q(),e),K={class:"container"},W={class:"fixed menu z-50"},G={class:"bg-purple-800 hover:bg-purple-700 text-white font-bold py-3 px-3 rounded printer"},Q={class:"checkboxlabel"},X=h(()=>t("label",{for:"printA4"},"A4",-1)),Y={class:"checkboxlabel"},Z=h(()=>t("label",{for:"printLetter"},"Letter",-1)),ee={class:"checkboxlabel"},te=h(()=>t("label",{for:"printPrintshop"},"Printshop",-1)),oe=h(()=>t("div",{class:"spacing"},null,-1)),re={class:"checkboxlabel"},ne=h(()=>t("label",{for:"A4"},"A4",-1)),se={class:"checkboxlabel"},ie=h(()=>t("label",{for:"Letter"},"Letter",-1)),ae={class:"maincontainer"},pe={class:"page-options-menu"},le={class:"page-options-row"},de=["onChange"],ce=h(()=>t("option",{value:"start"},"Start",-1)),ue=h(()=>t("option",{value:"middle"},"Middle",-1)),ge=h(()=>t("option",{value:"end"},"End",-1)),he=[ce,ue,ge],me={class:"page-options-row"},_e=["onUpdate:modelValue","id"],fe=["for"],ve={class:"page-options-row"},be=["id","onUpdate:modelValue"],ke=["for"],ye={class:"page-options-row"},Pe=["id","onUpdate:modelValue"],Le=["for"],Ae={class:"page-options-row"},Se=["id","onUpdate:modelValue"],ze=["for"],we={class:"page-options-row"},Ve=["id","onInput","onUpdate:modelValue"],$e=["for"],Ie={class:"page"},Ue={class:"pageimg"},Ne=["src"],Fe=["src"];function Oe(e,o,i,a,n,s){const p=b("PrinterIcon"),P=b("FolderOpenIcon"),f=b("dialog-button"),y=b("dropzone"),v=b("file-selector");return u(),g("div",K,[t("nav",W,[t("a",{onClick:o[0]||(o[0]=r=>e.print(e.fileName,e.images,e.printA4,e.printLetter,e.printPrintshop)),class:"button"},[t("button",G,[k(p,{class:"h-5 w-5"})])]),t("div",Q,[X,c(t("input",{type:"checkbox",id:"printA4","onUpdate:modelValue":o[1]||(o[1]=r=>e.printA4=r),checked:""},null,512),[[_,e.printA4]])]),t("div",Y,[Z,c(t("input",{type:"checkbox",id:"printLetter","onUpdate:modelValue":o[2]||(o[2]=r=>e.printLetter=r),checked:""},null,512),[[_,e.printLetter]])]),t("div",ee,[te,c(t("input",{type:"checkbox",id:"printPrintshop","onUpdate:modelValue":o[3]||(o[3]=r=>e.printPrintshop=r),checked:""},null,512),[[_,e.printPrintshop]])]),oe,t("div",re,[ne,c(t("input",{"onUpdate:modelValue":o[4]||(o[4]=r=>e.pageSize=r),type:"radio",name:"pagesize",id:"A4",value:"A4",checked:""},null,512),[[$,e.pageSize]])]),t("div",se,[ie,c(t("input",{"onUpdate:modelValue":o[5]||(o[5]=r=>e.pageSize=r),type:"radio",name:"pagesize",id:"Letter",value:"Letter"},null,512),[[$,e.pageSize]])])]),t("main",ae,[k(v,{modelValue:e.previews,"onUpdate:modelValue":o[6]||(o[6]=r=>e.previews=r),accept:["image/png","image/jpeg"]},{default:A(()=>[k(y,null,{default:A(({hovered:r})=>[t("div",{class:S(["pagedropzone block w-full h-64 rounded-lg border-4 border-dashed border-gray-400 transition-colors duration-150 flex flex-col space-y-4 justify-center items-center",{"border-blue-200":r}])},[k(f,{class:"bg-purple-800 hover:bg-purple-700 text-white font-bold py-3 px-3 rounded printer"},{default:A(()=>[k(P,{class:"h-5 w-5"})]),_:1})],2)]),_:1})]),_:1},8,["modelValue"]),(u(!0),g(I,null,U(e.images,(r,d)=>(u(),g("div",{class:"previewblock",key:r.url},[t("div",pe,[t("div",le,[t("select",{onChange:l=>{r.align=l.currentTarget.value}},he,40,de)]),t("div",me,[c(t("input",{"onUpdate:modelValue":l=>r.regmarks=l,type:"checkbox",name:"toggleregs",id:"ToggleRegs"+d,value:"ToggleRegs",checked:""},null,8,_e),[[_,r.regmarks]]),t("label",{for:"ToggleRegs"+d},"Regmarks",8,fe)]),t("div",ve,[c(t("input",{type:"checkbox",id:"printA4"+d,"onUpdate:modelValue":l=>r.printA4=l,checked:""},null,8,be),[[_,r.printA4]]),t("label",{for:"printA4"+d},"A4",8,ke)]),t("div",ye,[c(t("input",{type:"checkbox",id:"printLetter"+d,"onUpdate:modelValue":l=>r.printLetter=l,checked:""},null,8,Pe),[[_,r.printLetter]]),t("label",{for:"printLetter"+d},"Letter",8,Le)]),t("div",Ae,[c(t("input",{type:"checkbox",id:"printPrintshop"+d,"onUpdate:modelValue":l=>r.printPrintshop=l,checked:""},null,8,Se),[[_,r.printPrintshop]]),t("label",{for:"printPrintshop"+d},"Printshop",8,ze)]),t("div",we,[c(t("input",{type:"input",size:"2",id:"pageNumber"+d,onInput:l=>e.changePageNumber(e.images,d,r.pageNumber),"onUpdate:modelValue":l=>r.pageNumber=l,checked:""},null,40,Ve),[[D,r.pageNumber]]),t("label",{for:"pageNumber"+d},"Page number",8,$e)])]),t("div",Ie,[t("div",{class:S([r.align,e.getPageSize()])},[t("div",Ue,[r.regmarks?(u(),g("img",{key:0,class:"overlayimg",src:e.getPageRegmarks()},null,8,Ne)):z("",!0),t("img",{class:"pageimg",src:r.url},null,8,Fe)])],2)])]))),128))])])}var Re=N(H,[["render",Oe],["__scopeId","data-v-57feb318"]]);const qe=w({computed:{isPageA4(){return this.$route.query.page=="A4"},isPageLetter(){return this.$route.query.page=="Letter"},getImagesJSON(){return JSON.parse(this.$route.query.imagesJSON)}},methods:{getPageRegmarks(){return this.$route.query.page=="Letter"?"letter-regmarks.png":"a4-regmarks.png"},checkForPrint(e){const o=this.$route.query.printSetting,i=o=="A4"&&e.printA4||o=="Letter"&&e.printA4||o=="Printshop"&&e.printPrintshop;return console.log(o+" for "+e.printPrintshop+" is "+i),i}},setup(){C(async()=>{const o=j().query,i=o.filename,a={margin:0,filename:i+".pdf",image:{type:"jpeg",quality:1},html2canvas:{dpi:300,letterRendering:!1,scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};o.page=="Letter"&&(a.jsPDF.unit="in",a.jsPDF.format="letter"),T().set(a).from(B().refs.pdf).save()})}}),De={class:"pdfcontainer",ref:"pdf"},Ce=["src"],je=["src"];function Te(e,o,i,a,n,s){return u(),g("div",De,[(u(!0),g(I,null,U(e.getImagesJSON,p=>(u(),g("div",{key:p},[e.checkForPrint(p)?(u(),g("div",{key:0,class:S([{"page-a4":e.isPageA4,"page-letter":e.isPageLetter},p.align])},[p.regmarks?(u(),g("img",{key:0,class:"overlayimg",src:e.getPageRegmarks()},null,8,Ce)):z("",!0),t("img",{class:"pageimg",src:p.url},null,8,je)],2)):z("",!0)]))),128))],512)}var Be=N(qe,[["render",Te],["__scopeId","data-v-60c37b6d"]]);const Ee=[{path:"/",component:Re},{path:"/print",component:Be}],Je=E({history:J(),routes:Ee});M({}).use(Je).mount("#app");
